---
title: "Hi3559a_A53UP调试(一)：helloworld"
date: 2020-12-25T16:57:05+08:00
draft: false
tags: ["Hi3559a"]
---

# 一、修改makefile
因为程序默认将图像处理相关的程序运行在linux系统中，





# 一、A53UP烧写脚本
在docker中运行应用程序的开发，因此需要主机跟docker容器共享tftpd根目录，在a53up的应用程序中添加如下代码，将生成的bin复制到tftpd服务器下：
```bash
# 在docker容器a53up的makefie中
cp sample.bin /home/shuixia/workspace/01hi3559a/01tftproot/sample_a53
```

在主机中一直运行该部分代码，程序一直监控sample_a53是否有变化，一旦有变化，便启动烧录程序。
```python
#-*- encoding=utf8 -*-
import time
import serial
import os,sys,shutil
from create_download import *

# 这里是我的路径
mfile = '/home/shuixia/workspace/01hi3559a/01tftproot/sample_a53'
if_first = True
o_time = 0

def get_diff(file):
    global if_first
    global o_time
    if os.path.isfile(file):
        if(if_first == True):
            o_time = c_time = time.ctime(os.path.getatime(file));  
            if_first = False
        c_time = time.ctime(os.path.getatime(file))
        if(c_time != o_time):
            o_time = c_time
            return True
    return False

def debug_a53up():
    if(get_diff(mfile)):
        print("start download!")
        ser=serial.Serial('/dev/ttyUSB0',115200,timeout=0.5)
        emmc_test = class_downlinux_emmc(512)
        emmc_test.reset(ser)
        emmc_test.debug_a53(10)
        emmc_test.write_list(ser)
        ser.close()
        print("end download!")
        
def main():
    while True:
        time.sleep(1)
        debug_a53up()

if __name__ == "__main__":
    main()

```



# 二、