<!doctype html>
<html lang="en-us">
  <head>
    <title> // 洛沧</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.68.3" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://shuishen-cang.github.io/css/main.min.98d725446055c7d6e9d648a0493139d9b9363294627276b951f06d5d19331003.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="[TOC]
一、 NNIE概述 二、 测试 NNIE在sdk中存在测试例程，其中可以直接运行，板卡开机启动挂载相关驱动，然后编译测试NNIE功能，其中NNIE部分单独测试，并不做任何图像处理，如果有需要，后期可以做图像处理。
1.开机启动 我的开机启动命令如下：开机挂载硬盘空间，以及加载驱动，我的驱动部分都存放在/home/01ko/ko路径下面，在/etc/profile下面添加如下代码：
mount -t ext4 /dev/mmcblk0p6 /home insmod /home/01ko/hi_ipcm.ko insmod /home/01ko/hi_virt-tty.ko cd /home/01ko/ko ./load3559av100_multicore -i sensor0 imx334 cd - 重新启动。
2.编译例程 测试例程在sdk中，在我的电脑路径下编译，便能够成功生成可执行文件。
docker start cang docker attach \ cd /workspace/sdk/02sdk/Hi3559AV100R001C02SPC020/01.software/board/Hi3559AV100_SDK_V2.0.2.0/mpp/sample/svp/multi-core make -j12 cd nnie make -j12 执行上述指令后并可以生成可执行文件sample_nnie_main，在目标机运行该程序。
/home/00shell/nfs.sh cd /mnt/04work/02hi3559a/02sdk/Hi3559AV100R001C02SPC020/01.software/board/Hi3559AV100_SDK_V2.0.2.0/mpp/sample/svp/multi-core/nnie ./sample_nnie_main 8 可以看到已经成功识别了目标。
3.修改例程 很多时候我们会训练自己的模型，这里选择使用自己训练的模型，分别生成了模型文件ship_inst.wk和测试文件1.bgr，该模型的输出分类为5类，其具体修改如下：
 将模型拷贝到对应的目标文件夹 修改例程中对应的参数 编译成功可执行文件，测试可执行文件  1) 拷贝文件 cp ship_inst.wk data/nnie_model/detection/ mkdir -p data/nnie_image/rgb cp 1.bgr data/nnie_image/rgb 2) 修改参数 sample_nnie.c"/>

    <meta property="og:title" content="" />
<meta property="og:description" content="[TOC]
一、 NNIE概述 二、 测试 NNIE在sdk中存在测试例程，其中可以直接运行，板卡开机启动挂载相关驱动，然后编译测试NNIE功能，其中NNIE部分单独测试，并不做任何图像处理，如果有需要，后期可以做图像处理。
1.开机启动 我的开机启动命令如下：开机挂载硬盘空间，以及加载驱动，我的驱动部分都存放在/home/01ko/ko路径下面，在/etc/profile下面添加如下代码：
mount -t ext4 /dev/mmcblk0p6 /home insmod /home/01ko/hi_ipcm.ko insmod /home/01ko/hi_virt-tty.ko cd /home/01ko/ko ./load3559av100_multicore -i sensor0 imx334 cd - 重新启动。
2.编译例程 测试例程在sdk中，在我的电脑路径下编译，便能够成功生成可执行文件。
docker start cang docker attach \ cd /workspace/sdk/02sdk/Hi3559AV100R001C02SPC020/01.software/board/Hi3559AV100_SDK_V2.0.2.0/mpp/sample/svp/multi-core make -j12 cd nnie make -j12 执行上述指令后并可以生成可执行文件sample_nnie_main，在目标机运行该程序。
/home/00shell/nfs.sh cd /mnt/04work/02hi3559a/02sdk/Hi3559AV100R001C02SPC020/01.software/board/Hi3559AV100_SDK_V2.0.2.0/mpp/sample/svp/multi-core/nnie ./sample_nnie_main 8 可以看到已经成功识别了目标。
3.修改例程 很多时候我们会训练自己的模型，这里选择使用自己训练的模型，分别生成了模型文件ship_inst.wk和测试文件1.bgr，该模型的输出分类为5类，其具体修改如下：
 将模型拷贝到对应的目标文件夹 修改例程中对应的参数 编译成功可执行文件，测试可执行文件  1) 拷贝文件 cp ship_inst.wk data/nnie_model/detection/ mkdir -p data/nnie_image/rgb cp 1.bgr data/nnie_image/rgb 2) 修改参数 sample_nnie.c" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shuishen-cang.github.io/post/hi3559a/06hi3559a_08nnie%E6%B5%8B%E8%AF%95/" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://shuishen-cang.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <h1>洛沧</h1>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/tags/hi3559a">Hi3559a开发
</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/lichee">lichee学习
</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/ubuntu">ubuntu系统搭建
</a>
      </nav>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/shuishen-cang" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://gitee.com/shuishen-cang/" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title"></h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jan 1, 0001
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>[TOC]</p>
<h1 id="一-nnie概述">一、 NNIE概述</h1>
<h1 id="二-测试">二、 测试</h1>
<p>NNIE在sdk中存在测试例程，其中可以直接运行，板卡开机启动挂载相关驱动，然后编译测试NNIE功能，其中NNIE部分单独测试，并不做任何图像处理，如果有需要，后期可以做图像处理。</p>
<h2 id="1开机启动">1.开机启动</h2>
<p>我的开机启动命令如下：开机挂载硬盘空间，以及加载驱动，我的驱动部分都存放在/home/01ko/ko路径下面，在<code>/etc/profile</code>下面添加如下代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mount -t ext4 /dev/mmcblk0p6 /home                                                                                                                                                                                                                                                                                                    
insmod /home/01ko/hi_ipcm.ko                                                                                                                                         
insmod /home/01ko/hi_virt-tty.ko                                                                                                                                     
                                                                                                                                                              
cd /home/01ko/ko                                                                                                                                                     
./load3559av100_multicore -i sensor0 imx334                                                                                                                          
cd - 
</code></pre></div><p>重新启动。</p>
<h2 id="2编译例程">2.编译例程</h2>
<p>测试例程在sdk中，在我的电脑路径下编译，便能够成功生成可执行文件。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker start cang
docker attach <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>cd /workspace/sdk/02sdk/Hi3559AV100R001C02SPC020/01.software/board/Hi3559AV100_SDK_V2.0.2.0/mpp/sample/svp/multi-core
make -j12
cd nnie
make -j12
</code></pre></div><p>执行上述指令后并可以生成可执行文件<code>sample_nnie_main</code>，在目标机运行该程序。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/home/00shell/nfs.sh
cd /mnt/04work/02hi3559a/02sdk/Hi3559AV100R001C02SPC020/01.software/board/Hi3559AV100_SDK_V2.0.2.0/mpp/sample/svp/multi-core/nnie
./sample_nnie_main <span style="color:#ae81ff">8</span>
</code></pre></div><p>可以看到已经成功识别了目标。</p>
<h2 id="3修改例程">3.修改例程</h2>
<p>很多时候我们会训练自己的模型，这里选择使用自己训练的模型，分别生成了模型文件<code>ship_inst.wk</code>和测试文件<code>1.bgr</code>，该模型的输出分类为5类，其具体修改如下：</p>
<ul>
<li>将模型拷贝到对应的目标文件夹</li>
<li>修改例程中对应的参数</li>
<li>编译成功可执行文件，测试可执行文件</li>
</ul>
<h3 id="1-拷贝文件">1) 拷贝文件</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp ship_inst.wk data/nnie_model/detection/
mkdir -p data/nnie_image/rgb
cp 1.bgr data/nnie_image/rgb
</code></pre></div><h3 id="2-修改参数">2) 修改参数</h3>
<p>sample_nnie.c</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">SAMPLE_SVP_NNIE_Yolov3</span>(<span style="color:#66d9ef">void</span>)
{
    HI_CHAR <span style="color:#f92672">*</span>pcSrcFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./data/nnie_image/rgb/1.bgr&#34;</span>;
    HI_CHAR <span style="color:#f92672">*</span>pcModelName <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./data/nnie_model/detection/ship_inst.wk&#34;</span>;
   	...
}

<span style="color:#66d9ef">static</span> HI_S32 <span style="color:#a6e22e">SAMPLE_SVP_NNIE_Yolov3_SoftwareInit</span>(SAMPLE_SVP_NNIE_CFG_S<span style="color:#f92672">*</span> pstCfg,
    SAMPLE_SVP_NNIE_PARAM_S <span style="color:#f92672">*</span>pstNnieParam, SAMPLE_SVP_NNIE_YOLOV3_SOFTWARE_PARAM_S<span style="color:#f92672">*</span> pstSoftWareParam)
{
	...

    <span style="color:#75715e">// pstSoftWareParam-&gt;u32ClassNum = 80;			//这里是输出的类别
</span><span style="color:#75715e"></span>    pstSoftWareParam<span style="color:#f92672">-&gt;</span>u32ClassNum <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
    pstSoftWareParam<span style="color:#f92672">-&gt;</span>au32GridNumHeight[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">13</span>;	<span style="color:#75715e">//这里是实际尺寸除以32
</span><span style="color:#75715e"></span>    pstSoftWareParam<span style="color:#f92672">-&gt;</span>au32GridNumHeight[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">26</span>;	<span style="color:#75715e">//这里是实际尺寸除以16
</span><span style="color:#75715e"></span>    pstSoftWareParam<span style="color:#f92672">-&gt;</span>au32GridNumHeight[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">52</span>;	<span style="color:#75715e">//这里是实际尺寸除以8
</span><span style="color:#75715e"></span>    pstSoftWareParam<span style="color:#f92672">-&gt;</span>au32GridNumWidth[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">13</span>;
    pstSoftWareParam<span style="color:#f92672">-&gt;</span>au32GridNumWidth[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">26</span>;
    pstSoftWareParam<span style="color:#f92672">-&gt;</span>au32GridNumWidth[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">52</span>;
    
    pstSoftWareParam<span style="color:#f92672">-&gt;</span>u32MaxRoiNum <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;				<span style="color:#75715e">//一份图最多检测类别
</span><span style="color:#75715e"></span>    ...
}
</code></pre></div><p>sample_svp_nnie_software.h</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#define SAMPLE_SVP_NNIE_YOLOV3_EACH_BBOX_INFER_RESULT_NUM   10 </span><span style="color:#75715e">/*yolov3 inference result num of each bbox*/</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">// #define SAMPLE_SVP_NNIE_YOLOV3_EACH_BBOX_INFER_RESULT_NUM   85 /*yolov3 inference result num of each bbox*/
</span></code></pre></div><p>该参数为最大检测的类别加5。</p>
<h3 id="3-编译测试">3) 编译测试</h3>
<p>在docker容器。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">make clean
make -j12
</code></pre></div><p>在目标机</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ./sample_nnie_main 8</span>
<span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Debug,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_COMM_SVP_CheckSysInit <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:82 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:Svp mpi init ok!                                               <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Info,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_SVP_NNIE_Yolov3 <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:2952 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:Yolov3 Load model!                                                 <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Info,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_SVP_NNIE_Yolov3 <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:2961 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:Yolov3 parameter initialization!                                   <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Info,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_SVP_NNIE_Yolov3 <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:2968 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:Yolov3 start!                                                       <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Info,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_SVP_NNIE_Yolov3 <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:3005 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:Yolov3 result:                                                     <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Info,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_SVP_NNIE_Detection_PrintResult <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:791 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:<span style="color:#f92672">====</span> The 3th class box info<span style="color:#f92672">====</span>                       <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Info,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_SVP_NNIE_Detection_PrintResult <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:804 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:0 <span style="color:#ae81ff">72</span> <span style="color:#ae81ff">416</span> <span style="color:#ae81ff">277</span> 0.997803                              <span style="color:#f92672">[</span>Level<span style="color:#f92672">]</span>:Debug,<span style="color:#f92672">[</span>Func<span style="color:#f92672">]</span>:SAMPLE_COMM_SVP_CheckSysExit <span style="color:#f92672">[</span>Line<span style="color:#f92672">]</span>:95 <span style="color:#f92672">[</span>Info<span style="color:#f92672">]</span>:Svp mpi exit ok! 
</code></pre></div><p>如上述反馈，已经测试成功了，其中用的测试图片为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">HI_CHAR <span style="color:#f92672">*</span>pcSrcFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./data/nnie_image/rgb/2.bgr&#34;</span>;
HI_CHAR <span style="color:#f92672">*</span>pcModelName <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./data/nnie_model/detection/ship_inst.wk&#34;</span>;
</code></pre></div><h1 id="三-图片标注">三、 图片标注</h1>
<p>上面的程序中输出了部分坐标，需要将坐标的数据进行标准以验证数据的正确性。</p>
<p>BGR的数据格式为原理数据，使用读文件读取数据即可，采用python编写部分验证性代码，代码如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#39;&#39;&#39;
</span><span style="color:#e6db74">Author: your name
</span><span style="color:#e6db74">Date: 2021-01-17 17:36:35
</span><span style="color:#e6db74">LastEditTime: 2021-01-17 22:58:41
</span><span style="color:#e6db74">LastEditors: Please set LastEditors
</span><span style="color:#e6db74">Description: In User Settings Edit
</span><span style="color:#e6db74">FilePath: /tf/test.py
</span><span style="color:#e6db74">&#39;&#39;&#39;</span>
<span style="color:#f92672">import</span> os
<span style="color:#f92672">import</span> cv2
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt



<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test</span>():
    f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#34;./2.bgr&#34;</span>, <span style="color:#e6db74">&#39;rb&#39;</span>)
    data <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
    data <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>frombuffer(data, dtype<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>uint8) 
    f<span style="color:#f92672">.</span>close()
    img_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">416</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">416</span>
    B1 <span style="color:#f92672">=</span> data[<span style="color:#ae81ff">0</span>:img_size <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">3</span>]
    G1 <span style="color:#f92672">=</span> data[<span style="color:#ae81ff">1</span>:img_size <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">3</span>]
    R1 <span style="color:#f92672">=</span> data[<span style="color:#ae81ff">2</span>:img_size <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">3</span>]

    B <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>reshape(B1,(<span style="color:#ae81ff">416</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
    G <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>reshape(G1,(<span style="color:#ae81ff">416</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
    R <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>reshape(R1,(<span style="color:#ae81ff">416</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))

    newimg <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>merge([B, G, R])

    ptLeftTop <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">72</span>)
    ptRightBottom <span style="color:#f92672">=</span> (<span style="color:#ae81ff">416</span>, <span style="color:#ae81ff">277</span>)
    point_color <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e"># BGR</span>
    thickness <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span> 
    lineType <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
    cv2<span style="color:#f92672">.</span>rectangle(newimg, ptLeftTop, ptRightBottom, point_color, thickness, lineType)

    cv2<span style="color:#f92672">.</span>imshow(<span style="color:#e6db74">&#34;new&#34;</span>, newimg)
    cv2<span style="color:#f92672">.</span>waitKey(<span style="color:#ae81ff">0</span>)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
    test()

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    main() 
</code></pre></div><p>输入图像如下：</p>
<p><img src="/home/luocang/.config/Typora/typora-user-images/image-20210117225920869.png" alt="image-20210117225920869"></p>
<h1 id="四-官方demo">四、 官方demo</h1>
<p><img src="/home/luocang/.config/Typora/typora-user-images/image-20210118092139269.png" alt="image-20210118092139269"></p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
